---
image: alpine/edge
packages:
  - git
sources:
  - https://git.sr.ht:~xyhhx/push-to-remotes
secrets:
  - 8d1c224a-af8d-446e-8c67-6b7b514e2d39 
environment:
  repo_name: push-to-remotes
  github_username: xyhhx
  github_repo: xyhhx/push-to-remotes
tasks:
  - github: |
      cd "${repo_name}" 
      github_token=$(cat /run/secrets/github_pat)
      github_url=$(printf "https://%s:%s@github.com/%s" "${github_username}" "${github_token}" "${github_repo}")
      git push --all "${github_url}"
